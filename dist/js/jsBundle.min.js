!function(){"use strict";function e(e,t,o){e.state("Welcome",{url:"/",templateUrl:"/views/welcome_page.html"}).state("Register",{url:"/Register",templateUrl:"/views/user_register.html"}).state("Login",{url:"/Login",templateUrl:"/views/user_login.html"}).state("Home",{url:"/Home",templateUrl:"/views/home_page.html"}).state("Business",{url:"/Business",templateUrl:"/views/business_page.html"}).state("Discovery",{url:"/Discovery",templateUrl:"/views/discovery_page.html"}).state("MyPost",{url:"/MyPost",templateUrl:"/views/mypost_page.html"}).state("Profile",{url:"/Profile",templateUrl:"/views/profile_page.html"}).state("TakePhoto",{url:"/TakePhoto",templateUrl:"/views/takephoto_page.html"}).state("CategoryResults",{url:"/CategoryResults",templateUrl:"/views/CategoryResults_page.html"}).state("PasswordReset",{url:"/PasswordReset",templateUrl:"/views/passwordreset_page.html"}).state("Token",{url:"/Token/:token",templateUrl:"views/token.html",controller:"TokenController",resolve:{token:["$stateParams",function(e){return e.token}]}}),o.configure({key:"AIzaSyBxyZmdIb_nrx9U2AbXXNbAIGXH_ev3X78",v:"3.17",libraries:"places,weather,geometry,visualization"}),t.otherwise("/")}angular.module("app",["ui.router","uiGmapgoogle-maps"]).config(e),e.$inject=["$stateProvider","$urlRouterProvider","uiGmapGoogleMapApiProvider"]}(),function(){"use strict";function e(e){}angular.module("app").controller("BusinessController",e),e.$inject=["HomeFactory"]}(),function(){"use strict";function e(e,t){var o=this;o.upload=function(t){e.upload(t).then(function(){e.setPhoto().then(function(){e.setPlace(id).then(function(){state.go("Home")})})})}}angular.module("app").controller("HomeController",e),e.$inject=["HomeFactory","UserFactory"]}(),function(){"use strict";function e(e){}angular.module("app").controller("ModalController",e),e.$inject=["UserFactory"]}(),function(){"use strict";function e(e){}angular.module("app").controller("MyPostController",e),e.$inject=["HomeFactory"]}(),function(){"use strict";function e(e,t,o,s,n){function r(){var o=l.user;return o.email&&o.password&&o.cpassword&&o.password===o.cpassword?void e.register(o).then(function(){t.go("Home")}):!1}function a(){e.login(l.user).then(function(){t.go("Home")})}var l=this;l.user={},l.status=e.status,l.register=r,l.login=a,l.logout=e.logout,l.scrollTo=function(e){n.hash(e),console.log(n.hash()),s()}}angular.module("app").controller("NavbarController",e),e.$inject=["UserFactory","$state","$scope","$anchorScroll","$location"]}(),function(){"use strict";function e(e,t,o,s,n,r){var a=this;a.results=n.placesResults,o.place={},o.goHome=function(){n.init()},o.search=function(){o.apiError=!1,n.search(o.searchPlace,o.searchDistance).then(function(e){for(var t=0;t<e.length;t++)n.createMarker(e[t]),a.results.length=0,a.results.push.apply(a.results,e)},function(e){o.apiError=!0,o.apiStatus=e})},o.send=function(){console.log(o.place.name+" : "+o.place.lat+", "+o.place.lng)},n.init()}angular.module("app").controller("SearchController",e),e.$inject=["HomeFactory","uiGmapGoogleMapApi","$scope","$window","Map","$state"]}(),function(){"use strict";function e(e,t,o,s){t.setToken(o),t.status.isLoggedIn=!0,s.go("Home")}angular.module("app").controller("TokenController",e),e.$inject=["HomeFactory","UserFactory","token","$state"]}(),function(){"use strict";function e(e,t){function o(o){var s=t.defer();return e.post("/api/Photos/upload",o).success(function(e,t){s.resolve(t)}),s.promise}function s(){var o=t.defer();return e.post("/api/Photos/setPhoto").success(function(){o.resolve()}),o.promise}function n(){var o=t.defer();return e.post("/api/Photos/setPlace").success(function(){o.resolve()}),o.promise}var r={};return r.upload=o,r.setPhoto=s,r.setPlace=n,r}angular.module("app").factory("HomeFactory",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t,o){var s,n,r,a,l,i,u=[],c=[];this.placesResults=c,this.init=function(){o.navigator.geolocation.getCurrentPosition(function(e){n=e.coords.latitude,r=e.coords.longitude,i=new google.maps.LatLng(n,r);var t={center:new google.maps.LatLng(n,r),zoom:16,disableDefaultUI:!0};l=new google.maps.Map(document.getElementById("map-canvas"),t),a=new google.maps.places.PlacesService(l);new google.maps.Marker({map:l,position:i})})},this.deleteMarker=function(){for(var e=0;e<u.length;e++)u[e].setMap(null)},this.search=function(t,o){function a(e,t){t==google.maps.places.PlacesServiceStatus.OK&&(c.resolve(e),console.log(res))}this.init();var c=e.defer(),p=t,g={location:new google.maps.LatLng(n,r),bounds:l.getBounds(),query:p};this.deleteMarker(),s=new google.maps.InfoWindow;var m=new google.maps.places.PlacesService(l);return m.textSearch(g,a),this.createMarker=function(e){var t=(e.geometry.location,new google.maps.Marker({map:l,position:e.geometry.location}));u.push(t),google.maps.event.addListener(t,"click",function(){s.setContent(e.name),s.open(l,this)});var o=new google.maps.LatLngBounds;o.extend(i),o.extend(e.geometry.location),l.fitBounds(o)},c.promise}}angular.module("app").service("Map",e),e.$inject=["$q","uiGmapGoogleMapApi","$window"]}(),function(){"use strict";function e(e,t){function o(o){var s=t.defer();return e.post("/api/Users/Register",o).success(function(e){r(e.token),p.status.isLoggedIn=!0,s.resolve()}),s.promise}function s(o){var s={email:o.email.toLowerCase(),password:o.password},n=t.defer();return e.post("/api/Users/Login",s).success(function(e){r(e.token),p.status.isLoggedIn=!0,n.resolve()}),n.promise}function n(){p.status.isLoggedIn=!1,l()}function r(e){localStorage.setItem("token",e),p.status.first_name=i(),p.status.last_name=u(),p.status.image=c()}function a(){return localStorage.token}function l(){localStorage.removeItem("token"),p.status.first_name=null,p.status.last_name=null,p.status.image=null}function i(){return JSON.parse(atob(a().split(".")[1])).first_name}function u(){return JSON.parse(atob(a().split(".")[1])).last_name}function c(){return JSON.parse(atob(a().split(".")[1])).image}var p={};return p.status={},a()&&(p.status.isLoggedIn=!0,p.status.first_name=i(),p.status.last_name=u(),p.status.image=c()),p.setToken=r,p.getToken=a,p.removeToken=l,p.register=o,p.login=s,p.logout=n,p}angular.module("app").factory("UserFactory",e),e.$inject=["$http","$q"]}();