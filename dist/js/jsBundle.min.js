!function(){"use strict";function t(t,e,o){t.state("Welcome",{url:"/",templateUrl:"/views/welcome_page.html"}).state("Register",{url:"/Register",templateUrl:"/views/user_register.html"}).state("Login",{url:"/Login",templateUrl:"/views/user_login.html"}).state("Home",{url:"/Home",templateUrl:"/views/home_page.html"}).state("Business",{url:"/Business",templateUrl:"/views/business_page.html"}).state("Discovery",{url:"/Discovery",templateUrl:"/views/discovery_page.html"}).state("MyPost",{url:"/MyPost",templateUrl:"/views/mypost_page.html"}).state("Profile",{url:"/Profile",templateUrl:"/views/profile_page.html"}).state("TakePhoto",{url:"/TakePhoto",templateUrl:"/views/takephoto_page.html"}).state("Token",{url:"/Token/:token",templateUrl:"views/token.html",controller:"TokenController",resolve:{token:["$stateParams",function(t){return t.token}]}}),o.configure({key:"AIzaSyBxyZmdIb_nrx9U2AbXXNbAIGXH_ev3X78",v:"3.17",libraries:"places,weather,geometry,visualization"}),e.otherwise("/")}angular.module("app",["ui.router","uiGmapgoogle-maps"]).config(t),t.$inject=["$stateProvider","$urlRouterProvider","uiGmapGoogleMapApiProvider"]}(),function(){"use strict";function t(t){}angular.module("app").controller("BusinessController",t),t.$inject=["HomeFactory"]}(),function(){"use strict";function t(t,e){var o=this;o.upload=function(e){t.upload(e).then(function(){t.setPhoto().then(function(){t.setPlace(id).then(function(){state.go("Home")})})})}}angular.module("app").controller("HomeController",t),t.$inject=["HomeFactory","UserFactory"]}(),function(){"use strict";function t(t){}angular.module("app").controller("ModalController",t),t.$inject=["UserFactory"]}(),function(){"use strict";function t(t){}angular.module("app").controller("MyPostController",t),t.$inject=["HomeFactory"]}(),function(){"use strict";function t(t,e,o,r,n){function s(){var o=i.user;return o.email&&o.password&&o.cpassword&&o.password===o.cpassword?void t.register(o).then(function(){e.go("Home")}):!1}function a(){t.login(i.user).then(function(){e.go("Home")})}var i=this;i.user={},i.status=t.status,i.register=s,i.login=a,i.logout=t.logout,i.scrollTo=function(t){n.hash(t),console.log(n.hash()),r()}}angular.module("app").controller("NavbarController",t),t.$inject=["UserFactory","$state","$scope","$anchorScroll","$location"]}(),function(){"use strict";function t(t,e,o,r,n,s){o.place={},o.goHome=function(){n.init()},o.search=function(){o.apiError=!1,n.search(o.searchPlace,o.searchDistance).then(function(t){for(var e=0;e<t.length;e++)n.createMarker(t[e])},function(t){o.apiError=!0,o.apiStatus=t})},o.send=function(){console.log(o.place.name+" : "+o.place.lat+", "+o.place.lng)},n.init()}angular.module("app").controller("SearchController",t),t.$inject=["HomeFactory","uiGmapGoogleMapApi","$scope","$window","Map","$state"]}(),function(){"use strict";function t(t,e,o,r){e.setToken(o),e.status.isLoggedIn=!0,r.go("Home")}angular.module("app").controller("TokenController",t),t.$inject=["HomeFactory","UserFactory","token","$state"]}(),function(){"use strict";function t(t,e){function o(o){var r=e.defer();return t.post("/api/Photos/upload",o).success(function(t,e){r.resolve(e)}),r.promise}function r(){var o=e.defer();return t.post("/api/Photos/setPhoto").success(function(){o.resolve()}),o.promise}function n(){var o=e.defer();return t.post("/api/Photos/setPlace").success(function(){o.resolve()}),o.promise}var s={};return s.upload=o,s.setPhoto=r,s.setPlace=n,s}angular.module("app").factory("HomeFactory",t),t.$inject=["$http","$q"]}(),function(){"use strict";function t(t,e){var o={};return o}angular.module("app").factory("PlacesFactory",t),t.$inject=["$http","$q"]}(),function(){"use strict";function t(t,e){function o(o){var r=e.defer();return t.post("/api/Users/Register",o).success(function(t){s(t.token),p.status.isLoggedIn=!0,r.resolve()}),r.promise}function r(o){var r={email:o.email.toLowerCase(),password:o.password},n=e.defer();return t.post("/api/Users/Login",r).success(function(t){s(t.token),p.status.isLoggedIn=!0,n.resolve()}),n.promise}function n(){p.status.isLoggedIn=!1,i()}function s(t){localStorage.setItem("token",t),p.status.first_name=l(),p.status.last_name=u(),p.status.image=c()}function a(){return localStorage.token}function i(){localStorage.removeItem("token"),p.status.first_name=null,p.status.last_name=null,p.status.image=null}function l(){return JSON.parse(atob(a().split(".")[1])).first_name}function u(){return JSON.parse(atob(a().split(".")[1])).last_name}function c(){return JSON.parse(atob(a().split(".")[1])).image}var p={};return p.status={},a()&&(p.status.isLoggedIn=!0,p.status.first_name=l(),p.status.last_name=u(),p.status.image=c()),p.setToken=s,p.getToken=a,p.removeToken=i,p.register=o,p.login=r,p.logout=n,p}angular.module("app").factory("UserFactory",t),t.$inject=["$http","$q"]}();