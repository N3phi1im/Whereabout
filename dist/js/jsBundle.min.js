!function(){"use strict";function e(e,t,o){e.state("Welcome",{url:"/",templateUrl:"/views/welcome_page.html"}).state("Register",{url:"/Register",templateUrl:"/views/user_register.html"}).state("Login",{url:"/Login",templateUrl:"/views/user_login.html"}).state("Home",{url:"/Home",templateUrl:"/views/home_page.html"}).state("Business",{url:"/Business",templateUrl:"/views/business_page.html"}).state("Discovery",{url:"/Discovery",templateUrl:"/views/discovery_page.html"}).state("MyPost",{url:"/MyPost",templateUrl:"/views/mypost_page.html"}).state("Profile",{url:"/Profile",templateUrl:"/views/profile_page.html"}).state("TakePhoto",{url:"/TakePhoto",templateUrl:"/views/takephoto_page.html"}),o.configure({key:"AIzaSyBxyZmdIb_nrx9U2AbXXNbAIGXH_ev3X78",v:"3.17",libraries:"places,weather,geometry,visualization"}),t.otherwise("/")}angular.module("app",["ui.router","uiGmapgoogle-maps"]).config(e),e.$inject=["$stateProvider","$urlRouterProvider","uiGmapGoogleMapApiProvider"]}(),function(){"use strict";function e(e){}angular.module("app").controller("BusinessController",e),e.$inject=["HomeFactory"]}(),function(){"use strict";function e(e,t){var o=this;o.upload=function(){e.upload().then(function(){e.setPhoto().then(function(){e.setPlace().then(function(){state.go("Home")})})})}}angular.module("app").controller("HomeController",e),e.$inject=["HomeFactory","UserFactory"]}(),function(){"use strict";function e(e){}angular.module("app").controller("ModalController",e),e.$inject=["UserFactory"]}(),function(){"use strict";function e(e){}angular.module("app").controller("MyPostController",e),e.$inject=["HomeFactory"]}(),function(){"use strict";function e(e,t,o,s,r){function n(){var o=u.user;return o.email&&o.password&&o.cpassword&&o.password===o.cpassword?void e.register(o).then(function(){t.go("Home")}):!1}function a(){e.login(u.user).then(function(){t.go("Home")})}function i(){e.facebook().then(function(){t.go("Home")})}var u=this;u.user={},u.status=e.status,u.register=n,u.login=a,u.facebook=i,u.logout=e.logout,u.scrollTo=function(e){r.hash(e),console.log(r.hash()),s()}}angular.module("app").controller("NavbarController",e),e.$inject=["UserFactory","$state","$scope","$anchorScroll","$location"]}(),function(){"use strict";function e(e,t,o,s,r,n){o.place={},o.goHome=function(){r.init()},o.search=function(){o.apiError=!1,r.search(o.searchPlace,o.searchDistance).then(function(e){for(var t=0;t<e.length;t++)r.createMarker(e[t])},function(e){o.apiError=!0,o.apiStatus=e})},o.send=function(){console.log(o.place.name+" : "+o.place.lat+", "+o.place.lng)},r.init()}angular.module("app").controller("SearchController",e),e.$inject=["HomeFactory","uiGmapGoogleMapApi","$scope","$window","Map","$state"]}(),function(){"use strict";function e(e,t){function o(){var o=t.defer();return e.post("/api/Photos/upload").success(function(){o.resolve()}),o.promise}function s(){var o=t.defer();return e.post("/api/Photos/setPhoto").success(function(){o.resolve()}),o.promise}function r(){var o=t.defer();return e.post("/api/Photos/setPlace").success(function(){o.resolve()}),o.promise}var n={};return n.upload=o,n.setPhoto=s,n.setPlace=r,n}angular.module("app").factory("HomeFactory",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t){function o(o){var s=t.defer();return e.post("/api/Users/Register",o).success(function(e){a(e.token),m.status.isLoggedIn=!0,s.resolve()}),s.promise}function s(o){var s={email:o.email.toLowerCase(),password:o.password},r=t.defer();return e.post("/api/Users/Login",s).success(function(e){a(e.token),m.status.isLoggedIn=!0,r.resolve()}),r.promise}function r(){var o=t.defer();return e.get("/api/Facebook/auth/facebook").success(function(e){a(e.token),m.status.isLoggedIn=!0,o.resolve()}),o.promise}function n(){m.status.isLoggedIn=!1,u()}function a(e){localStorage.setItem("token",e),m.status.first_name=l(),m.status.last_name=c(),m.status.image=p()}function i(){return localStorage.token}function u(){localStorage.removeItem("token"),m.status.first_name=null,m.status.last_name=null,m.status.image=null}function l(){return JSON.parse(atob(i().split(".")[1])).first_name}function c(){return JSON.parse(atob(i().split(".")[1])).last_name}function p(){return JSON.parse(atob(i().split(".")[1])).image}var m={};return m.status={},i()&&(m.status.isLoggedIn=!0,m.status.first_name=l(),m.status.last_name=c(),m.status.image=p()),m.setToken=a,m.getToken=i,m.removeToken=u,m.register=o,m.login=s,m.facebook=r,m.logout=n,m}angular.module("app").factory("UserFactory",e),e.$inject=["$http","$q"]}();